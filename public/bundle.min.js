!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}return r("next")})}}function o(e){return Object.keys(e).reduce(function(t,n){return t.push(n),"object"===u(e[n])&&(t=t.concat(o(e[n]))),t},[])}function a(e,t){var n=this,r=null;return function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];clearTimeout(r),r=setTimeout(function(){e.apply(n,a)},t)}}function i(){var e=escape(y.getValue());return"/#!/"+f+"?query="+e}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r,o;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return window.history.replaceState(null,f,i()),e.next=5,fetch(l+"/"+f+"?guid="+d+"&_method=PUT",{method:"post",body:t});case 5:if(n=e.sent,200===n.status){e.next=16;break}return e.next=9,n.json();case 9:if(r=e.sent,404!==n.status){e.next=14;break}return h.setValue("Record not found: resubmitting"),e.abrupt("return");case 14:return h.setValue(r.error),e.abrupt("return");case 16:return e.next=18,n.json();case 18:o=e.sent,h.setValue(o);case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c=function(e){return document.querySelector(e)},l="https://jace.glitch.me",f="",p=["length","utf8bytelength","keys","keys_unsorted","has","in","map","map_values","path","del","getpath","setpath","delpaths","to_entries","from_entries","with_entries","select","arrays","objects","iterables","booleans","numbers","normals","finites","strings","nulls","values","scalars","empty","error","halt","halt_error","paths","leaf_paths","add","any","all","flatten","range","floor","sqrt","tonumber","tostring","type","infinite","nan","isinfinite","isnan","isfinite","isnormal","group_by","min","max","min_by","max_by","unique","unique_by","reverse","contains","indices","index","rindex","inside","startswith","endswith","combinations","ltrimstr","rtrimstr","explode","implode","split","join","ascii_downcase","ascii_upcase","while","until","recurse","recurse_down","walk","env","transpose","bsearch","builtins","test","match","capture","scan","splits","sub","gsub","limit","first","last","nth","foreach","input","inputs","debug","stderr","input_filename","input_line_number","truncate_stream","fromstream","tostream","modulemeta"],d=function(){var e=localStorage.guid;return e||(e=localStorage.guid=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+(e()+e()+e())}()),e}();c("body").addEventListener("keydown",function(e){if(f&&83===e.keyCode&&(e.metaKey||e.ctrlKey)){var t=new Blob([h.getValue()||""],{type:"application/json"}),n=document.createElement("a");n.download=f+".json",n.href=URL.createObjectURL(t),n.click(),e.preventDefault()}});var m=CodeMirror.fromTextArea(c("#source textarea"),{lineNumbers:!0,mode:"application/ld+json",scrollPastEnd:!0}),h=CodeMirror.fromTextArea(c("#result textarea"),{lineNumbers:!0,mode:"application/ld+json",scrollPastEnd:!0,readOnly:!0}),y=CodeMirror.fromTextArea(c("#input textarea"),{mode:"text",autocomplete:!0,keywords:p,autofocus:!0});y.on("change",a(function(e){s(e.getValue())}),500),m.on("change",a(function(){var e=r(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{r=o(JSON.parse(t.getValue())),y.addKeywordsFromString(r.join(" "))}catch(e){}if("setValue"===n.origin){e.next=4;break}return e.next=4,b(t.getValue());case 4:return e.next=6,s(y.getValue());case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),1e3));var b=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(l+"/"+(f||"")+"?guid="+d,{method:"post",body:t});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,r.id&&f!==r.id&&(f=r.id,window.history.replaceState(null,f,i()));case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();0===window.location.hash.indexOf("#!/")&&(!function(){var e=new URL(window.location.origin+window.location.hash.split("#!")[1]),t=e.searchParams.get("query")||".";f=e.pathname.substr(1),y.setValue(t)}(),fetch(l+"/"+f+".json").then(function(e){return e.json()}).then(function(e){e.id!==f&&(f=e.id,window.history.replaceState(null,f,i())),m.setValue(JSON.stringify(e.payload,"",2)),s(y.getValue())})),y.setCursor({line:0,ch:y.getValue().length})}]);